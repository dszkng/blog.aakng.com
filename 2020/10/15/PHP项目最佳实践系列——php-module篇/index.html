<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="keywords" content="Hexo Theme Keep">
    <meta name="description" content="Hexo Theme Keep">
    <meta name="author" content="dszkng">
    
    <title>
        
            PHP项目最佳实践系列——php扩展之extension篇 |
        
        奇谈
    </title>
    
<link rel="stylesheet" href="/css/style.css">

    <link rel="shortcut icon" href="/images/logo.svg">
    
<link rel="stylesheet" href="/css/font-awesome.min.css">

    <script id="hexo-configurations">
    let KEEP = window.KEEP || {};
    KEEP.hexo_config = {"hostname":"example.com","root":"/","language":"en"};
    KEEP.theme_config = {"toc":{"enable":true,"number":true,"expand_all":true,"init_open":true},"style":{"primary_color":"#0066CC","avatar":"https://tva1.sinaimg.cn/large/e6c9d24egy1h5sertvdooj20u00u0q35.jpg","favicon":"/images/logo.svg","article_img_align":"left","left_side_width":"260px","content_max_width":"920px","hover":{"shadow":false,"scale":false},"first_screen":{"enable":true,"background_img":"/images/bg.svg","description":"Keep writing and Keep loving."},"scroll":{"progress_bar":{"enable":false},"percent":{"enable":false}}},"local_search":{"enable":true,"preload":true},"code_copy":{"enable":true,"style":"mac"},"pjax":{"enable":false},"lazyload":{"enable":true},"version":"3.4.5"};
    KEEP.language_ago = {"second":"%s seconds ago","minute":"%s minutes ago","hour":"%s hours ago","day":"%s days ago","week":"%s weeks ago","month":"%s months ago","year":"%s years ago"};
  </script>
<meta name="generator" content="Hexo 6.1.0"></head>


<body>
<div class="progress-bar-container">
    

    
</div>


<main class="page-container">

    

    <div class="page-main-content">

        <div class="page-main-content-top">
            <header class="header-wrapper">

    <div class="header-content">
        <div class="left">
            
            <a class="logo-title" href="/">
                奇谈
            </a>
        </div>

        <div class="right">
            <div class="pc">
                <ul class="menu-list">
                    
                        <li class="menu-item">
                            <a class=""
                               href="/"
                            >
                                主页
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/archives"
                            >
                                归档
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/categories"
                            >
                                分类
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/tags"
                            >
                                标签
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/links"
                            >
                                友链
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/about"
                            >
                                关于
                            </a>
                        </li>
                    
                    
                        <li class="menu-item search search-popup-trigger">
                            <i class="fas fa-search"></i>
                        </li>
                    
                </ul>
            </div>
            <div class="mobile">
                
                    <div class="icon-item search search-popup-trigger"><i class="fas fa-search"></i></div>
                
                <div class="icon-item menu-bar">
                    <div class="menu-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="header-drawer">
        <ul class="drawer-menu-list">
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/">主页</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/archives">归档</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/categories">分类</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/tags">标签</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/links">友链</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/about">关于</a>
                </li>
            
        </ul>
    </div>

    <div class="window-mask"></div>

</header>


        </div>

        <div class="page-main-content-middle">

            <div class="main-content">

                
                    <div class="fade-in-down-animation">
    <div class="article-content-container">

        <div class="article-title">
            <span class="title-hover-animation">PHP项目最佳实践系列——php扩展之extension篇</span>
        </div>

        
            <div class="article-header">
                <div class="avatar">
                    <img src="https://tva1.sinaimg.cn/large/e6c9d24egy1h5sertvdooj20u00u0q35.jpg">
                </div>
                <div class="info">
                    <div class="author">
                        <span class="name">dszkng</span>
                        
                            <span class="author-label">Lv4</span>
                        
                    </div>
                    <div class="meta-info">
                        <div class="article-meta-info">
    <span class="article-date article-meta-item">
        <i class="fas fa-edit"></i>&nbsp;
        <span class="pc">2020-10-15 18:56:42</span>
        <span class="mobile">2020-10-15 18:56</span>
    </span>
    
        <span class="article-categories article-meta-item">
            <i class="fas fa-folder"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/categories/%E7%BC%96%E7%A8%8B/">编程</a>&nbsp;
                    </li>
                
                    <li>
                        &gt; <a href="/categories/%E7%BC%96%E7%A8%8B/PHP/">PHP</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    
    
        <span class="article-tags article-meta-item">
            <i class="fas fa-tags"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/tags/PHP/">PHP</a>&nbsp;
                    </li>
                
                    <li>
                        | <a href="/tags/Extension/">Extension</a>&nbsp;
                    </li>
                
                    <li>
                        | <a href="/tags/Coding/">Coding</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    

    
    
        <span class="article-wordcount article-meta-item">
            <i class="fas fa-file-word"></i>&nbsp;<span>3.2k Words</span>
        </span>
    
    
        <span class="article-min2read article-meta-item">
            <i class="fas fa-clock"></i>&nbsp;<span>15 Mins</span>
        </span>
    
    
</div>

                    </div>
                </div>
            </div>
        

        <div class="article-content markdown-body">
            <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>在<code>PHP</code>生态里有两种扩展<code>PHP</code>功能的方式，官方定义成<code>Extension</code>和<code>Application</code>这两种。</p>
<ol>
<li><p><code>Extension</code>：可以理解成用<code>C语言</code>写的底层的<code>PHP扩展</code>，我们通常安装的<code>swoole</code>、<code>pdo_mysql</code>、<code>xdebug</code>、<code>bcmath</code>、<code>opcache</code>等等扩展功能用的就是这种。</p>
</li>
<li><p><code>Application</code>：可以理解用成<code>PHP</code>写的应用层的<code>PHP扩展</code>，我们通常用<code>Composer</code>管理项目里的<code>PHP Packeage</code>依赖包实际上就是这一种。</p>
</li>
</ol>
<p>这两种<code>PHP扩展</code>的安装方式都不一样，本文主要讲<code>extension</code>方式的安装和使用。</p>
<h1 id="工作原理"><a href="#工作原理" class="headerlink" title="工作原理"></a>工作原理</h1><h1 id="扩展的安装"><a href="#扩展的安装" class="headerlink" title="扩展的安装"></a>扩展的安装</h1><p>主要有两种安装方法，一种编译安装，一种是借助工具去安装（推荐使用这种方式）。</p>
<h2 id="编译安装"><a href="#编译安装" class="headerlink" title="编译安装"></a>编译安装</h2><h3 id="回顾-php-主要目录和命令"><a href="#回顾-php-主要目录和命令" class="headerlink" title="回顾 php 主要目录和命令"></a>回顾 php 主要目录和命令</h3><p>安装扩展之前先回顾一下<code>PHP</code>安装之后的主要目录和可执行命令。</p>
<blockquote>
<p>针对如果是编译安装的<code>PHP</code>，也可能各个目录分散在系统各个目录。</p>
</blockquote>
<ol>
<li>主要目录。</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">bin</span><br><span class="line">etc</span><br><span class="line">include</span><br><span class="line">lib</span><br><span class="line">php</span><br><span class="line">sbin</span><br><span class="line">var</span><br></pre></td></tr></table></figure>

<blockquote>
<p>查看库文件：</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ ls lib</span><br><span class="line">php</span><br><span class="line">    build</span><br><span class="line">    extensions</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>可执行文件都在<code>bin</code>目录下面。</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ ls bin</span><br><span class="line">phar</span><br><span class="line">phar.phar</span><br><span class="line">php</span><br><span class="line">php-cgi</span><br><span class="line">php-config</span><br><span class="line">phpdbg</span><br><span class="line">phpize</span><br><span class="line"></span><br><span class="line">$ ls sbin</span><br><span class="line">php-fpm</span><br></pre></td></tr></table></figure>

<p>命令介绍：</p>
<ul>
<li><code>php</code>是<code>cli</code>模式下的<code>PHP</code>脚本执行程序。</li>
<li><code>php-config</code>是输出<code>PHP</code>编译信息的辅助命令。</li>
<li><code>phpize</code>命令是用来动态安装扩展的，如果在安装<code>PHP</code>时没有安装某个扩展，可以通过这个命令随时安装。</li>
<li><code>phar</code>是一种类似于将代码打包的工具。<a class="link"   target="_blank" rel="noopener" href="https://blog.csdn.net/zhangyue0503/article/details/109040593" >查看<i class="fas fa-external-link-alt"></i></a></li>
<li><code>php-cgi</code></li>
<li><code>phpdbg</code>是一个轻量级，具有丰富功能的调试平台。<code>PHP 5.4</code>以上版本支持，比如可以使用它查看<code>opcode</code>：</li>
</ul>
<blockquote>
<p><code>phpdbg</code>命令的使用：</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ phpdbg -p t.php</span><br><span class="line">function name: (null)</span><br><span class="line">L1-4 &#123;main&#125;() /Users/aakng/project/php-guide/php-core/t.php - 0x10267e000 + 2 ops</span><br><span class="line"> L3    #0     ECHO                    123                                                           </span><br><span class="line"> L4    #1     RETURN&lt;-1&gt;              1                                                             </span><br><span class="line">[Script ended normally]</span><br></pre></td></tr></table></figure>

<blockquote>
<p><code>phpdbg</code>的其他功能可以通过<code>phpdbg --help</code>查看。</p>
</blockquote>
<h3 id="使用-phpize-命令安装扩展"><a href="#使用-phpize-命令安装扩展" class="headerlink" title="使用 phpize 命令安装扩展"></a>使用 phpize 命令安装扩展</h3><p>以<code>vld</code>扩展为例，介绍一下编译安装扩展的过程。</p>
<ol>
<li>下载扩展&amp;安装。</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ git clone https://github.com/derickr/vld.git</span><br><span class="line"></span><br><span class="line">$ cd vld</span><br><span class="line"></span><br><span class="line">$ phpize</span><br><span class="line"></span><br><span class="line">$ ./configure</span><br><span class="line"># 或</span><br><span class="line"># ./configure --with-php-config=/usr/local/src/php-7.4.14/bin/php-config --enable-vld</span><br><span class="line"></span><br><span class="line">$ make &amp;&amp; make install -j6</span><br></pre></td></tr></table></figure>

<blockquote>
<p>安装的时候如果没有指定配置文件目录，默认就在<code>/etc</code>下。</p>
</blockquote>
<ol start="2">
<li>安装完成启用<code>vld</code>扩展。</li>
</ol>
<blockquote>
<p>使用<code>phpenmod</code>命令启用：</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ phpenmod vld</span><br></pre></td></tr></table></figure>

<blockquote>
<p>或者修改<code>php.ini</code>配置文件启用：</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"># 先查看一下配置文件目录在哪？</span><br><span class="line">$ php --ini</span><br><span class="line">Configuration File (php.ini) Path: /usr/local/etc/php</span><br><span class="line">Loaded Configuration File:         /usr/local/etc/php/php.ini</span><br><span class="line">Scan for additional .ini files in: /usr/local/etc/php/conf.d</span><br><span class="line">Additional .ini files parsed:      /usr/local/etc/php/conf.d/docker-php-ext-bcmath.ini,</span><br><span class="line">/usr/local/etc/php/conf.d/docker-php-ext-gd.ini,</span><br><span class="line">/usr/local/etc/php/conf.d/docker-php-ext-mongodb.ini,</span><br><span class="line">/usr/local/etc/php/conf.d/docker-php-ext-opcache.ini,</span><br><span class="line">/usr/local/etc/php/conf.d/docker-php-ext-pcntl.ini,</span><br><span class="line">/usr/local/etc/php/conf.d/docker-php-ext-pdo_mysql.ini,</span><br><span class="line">/usr/local/etc/php/conf.d/docker-php-ext-redis.ini,</span><br><span class="line">/usr/local/etc/php/conf.d/docker-php-ext-sodium.ini,</span><br><span class="line">/usr/local/etc/php/conf.d/docker-php-ext-tideways.ini,</span><br><span class="line">/usr/local/etc/php/conf.d/docker-php-ext-xdebug.ini,</span><br><span class="line">/usr/local/etc/php/conf.d/docker-php-ext-zip.ini</span><br><span class="line">/usr/local/etc/php/conf.d/docker-php-ext-vld.ini</span><br></pre></td></tr></table></figure>

<blockquote>
<p>先编辑<code>/usr/local/etc/php/php.ini</code>或<code>/usr/local/etc/php/conf.d/docker-php-ext-vld.ini</code>，写入<code>extension=vld.so</code>，再使用<code>phpenmod -s fpm vld</code>或者重启<code>fpm</code>。</p>
</blockquote>
<blockquote>
<p>重启<code>fpm</code>的方式如下：</p>
</blockquote>
<blockquote>
<p>方式一（推荐）：</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># 查看 master 进程的pid</span><br><span class="line">$ ps aux | grep fpm</span><br><span class="line">root        55  0.0  0.0   4736  1236 ?        Ss   Jun28   0:00 runsv php-fpm</span><br><span class="line">root        61  0.0  0.0 472176 29904 ?        Ss   Jun28   3:44 php-fpm: master process (/etc/php/7.2/fpm/php-fpm.conf)</span><br><span class="line">root        70  0.0  0.1 552248 46312 ?        S    Jun28   0:02 php-fpm: pool www</span><br><span class="line">root       996  0.0  0.1 552168 42248 ?        S    Jul07   0:00 php-fpm: pool www</span><br><span class="line">root      1078  0.0  0.0 475112 25328 ?        S    Aug08   0:00 php-fpm: pool www</span><br><span class="line">root      1133  0.0  0.0  15060  1328 pts/0    S+   18:06   0:00 grep --color=auto fpm</span><br><span class="line"></span><br><span class="line"># 重启 master 进程，61是进程号</span><br><span class="line">$ kill -USR2 61</span><br></pre></td></tr></table></figure>

<blockquote>
<p>方式二，先<code>kill</code>再启动：</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 杀死 master 进程</span><br><span class="line">$ kill -9 61</span><br><span class="line"></span><br><span class="line"># 启动</span><br><span class="line">$ /etc/init.d/php-fpm start</span><br></pre></td></tr></table></figure>

<blockquote>
<p>方式三（推荐）：</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ systemctl restart php7.2-fpm.service </span><br><span class="line">$ systemctl status  php7.2-fpm.service </span><br></pre></td></tr></table></figure>

<ol start="3">
<li><code>vld</code>扩展的使用。</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">$ php -dvld.active=1 t.php </span><br><span class="line"></span><br><span class="line">Finding entry points</span><br><span class="line">Branch analysis from position: 0</span><br><span class="line">1 jumps found. (Code = 62) Position 1 = -2</span><br><span class="line">filename:       /Users/aakng/project/php-guide/php-core/t.php</span><br><span class="line">function name:  (null)</span><br><span class="line">number of ops:  2</span><br><span class="line">compiled vars:  none</span><br><span class="line">line      #* E I O op                           fetch          ext  return  operands</span><br><span class="line">-------------------------------------------------------------------------------------</span><br><span class="line">    3     0  E &gt;   ECHO                                                     123</span><br><span class="line">    4     1      &gt; RETURN                                                   1</span><br><span class="line"></span><br><span class="line">branch: #  0; line:     3-    4; sop:     0; eop:     1; out0:  -2</span><br><span class="line">path #1: 0, </span><br><span class="line">123%                                 </span><br></pre></td></tr></table></figure>

<ol start="4">
<li>编译安装过程可能遇到的一些问题。</li>
</ol>
<blockquote>
<p><code>./configure</code>执行报错：</p>
</blockquote>
<blockquote>
<p>问题1：</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">./configure</span><br><span class="line"></span><br><span class="line">...中间省略...</span><br><span class="line"></span><br><span class="line">configure: error: Please specify the install prefix of iconv with --with-iconv=&lt;DIR&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p><a class="link"   target="_blank" rel="noopener" href="http://www.02405.com/soft/mac/1764.html" >问题1解决<i class="fas fa-external-link-alt"></i></a></p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./configure --prefix=$HOME/project/php-guide/php-core/php-7.4.14-output --enable-fpm --with-iconv=/usr/local/opt/libiconv/</span><br></pre></td></tr></table></figure>

<blockquote>
<p>问题2：</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Cannot find autoconf. Please check your autoconf installation and the</span><br><span class="line">$PHP_AUTOCONF environment variable. Then, rerun this script.</span><br></pre></td></tr></table></figure>

<blockquote>
<p>问题2解决：</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 假如当前是 macOS 系统</span><br><span class="line">brew install autoconf</span><br></pre></td></tr></table></figure>

<blockquote>
<p>问题3：</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">php -m | grep vld</span><br><span class="line"></span><br><span class="line">PHP Warning:  PHP Startup: Unable to load dynamic library &#x27;vld&#x27; (tried: /usr/lib/php/extensions/no-debug-non-zts-20180731/vld (dlopen(/usr/lib/php/extensions/no-debug-non-zts-20180731/vld, 0x0009): dlopen(): file not found: /usr/lib/php/extensions/no-debug-non-zts-20180731/vld), /usr/lib/php/extensions/no-debug-non-zts-20180731/vld.so (dlopen(/usr/lib/php/extensions/no-debug-non-zts-20180731/vld.so, 0x0009): dlopen(): file not found: /usr/lib/php/extensions/no-debug-non-zts-20180731/vld.so)) in Unknown on line 0</span><br></pre></td></tr></table></figure>

<blockquote>
<p>问题3解决：系统存在多个 php 版本导致，没找对php，需要指定 php-config。</p>
</blockquote>
<blockquote>
<p>其他问题：</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># ubuntu 缺失 phpize 等命令，解决方式：</span><br><span class="line">$ apt-get install php5.6-dev</span><br><span class="line">$ apt-get install php7.2-dev</span><br></pre></td></tr></table></figure>

<h2 id="使用工具安装"><a href="#使用工具安装" class="headerlink" title="使用工具安装"></a>使用工具安装</h2><h3 id="使用-install-php-extensions-脚本"><a href="#使用-install-php-extensions-脚本" class="headerlink" title="使用 install-php-extensions 脚本"></a>使用 install-php-extensions 脚本</h3><p>如果<code>PHP</code>环境是泡在<code>docker</code>环境中的，可以使用<code>docker-install-php-ext</code>命令来管理<code>php extension</code>。</p>
<p>查看命令使用方式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$ docker-php-ext-install </span><br><span class="line">usage: /usr/local/bin/docker-php-ext-install [-jN] ext-name [ext-name ...]</span><br><span class="line">   ie: /usr/local/bin/docker-php-ext-install gd mysqli</span><br><span class="line">       /usr/local/bin/docker-php-ext-install pdo pdo_mysql</span><br><span class="line">       /usr/local/bin/docker-php-ext-install -j5 gd mbstring mysqli pdo pdo_mysql shmop</span><br><span class="line"></span><br><span class="line">if custom ./configure arguments are necessary, see docker-php-ext-configure</span><br><span class="line"></span><br><span class="line">Possible values for ext-name:</span><br><span class="line">bcmath bz2 calendar ctype curl dba dom enchant exif fileinfo filter ftp gd gettext gmp hash iconv imap interbase intl json ldap mbstring mysqli oci8 odbc opcache pcntl pdo pdo_dblib pdo_firebird pdo_mysql pdo_oci pdo_odbc pdo_pgsql pdo_sqlite pgsql phar posix pspell readline recode reflection session shmop simplexml snmp soap sockets sodium spl standard sysvmsg sysvsem sysvshm tidy tokenizer wddx xml xmlreader xmlrpc xmlwriter xsl zend_test zip</span><br><span class="line"></span><br><span class="line">Some of the above modules are already compiled into PHP; please check</span><br><span class="line">the output of &quot;php -i&quot; to see which modules are already loaded.</span><br></pre></td></tr></table></figure>

<p>可以发现需要安装的扩展必须是在上面列表中的才能用这个命令。</p>
<p>开启扩展：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ docker-php-ext-enable xdebug</span><br><span class="line">fetch http://mirrors.aliyun.com/alpine/v3.10/main/aarch64/APKINDEX.tar.gz</span><br><span class="line">fetch http://mirrors.aliyun.com/alpine/v3.10/community/aarch64/APKINDEX.tar.gz</span><br><span class="line">(1/1) Installing .docker-php-ext-enable-deps (20220827.082015)</span><br><span class="line">OK: 302 MiB in 75 packages</span><br><span class="line"></span><br><span class="line">warning: xdebug (xdebug.so) is already loaded!</span><br><span class="line"></span><br><span class="line">(1/1) Purging .docker-php-ext-enable-deps (20220827.082015)</span><br><span class="line">OK: 302 MiB in 74 packages</span><br></pre></td></tr></table></figure>

<p>验证开启结果：</p>
<blockquote>
<p>会发现<code>xdebug</code>扩展在<code>PHP环境</code>中并没有被安装，开启的时候会去先安装，然后再开启。</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ php -m | grep xdebug</span><br><span class="line">xdebug</span><br></pre></td></tr></table></figure>

<p>安装扩展：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker-php-ext-install xdebug</span><br></pre></td></tr></table></figure>

<p>如果这个命令不存在，可以手动安装一下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ wget https://github.com/mlocati/docker-php-extension-installer/releases/latest/download/install-php-extensions</span><br><span class="line"></span><br><span class="line">$ chmod +x install-php-extensions</span><br><span class="line"></span><br><span class="line">$ ./install-php-extensions gd</span><br></pre></td></tr></table></figure>

<h3 id="使用-pecl-命令"><a href="#使用-pecl-命令" class="headerlink" title="使用 pecl 命令"></a>使用 pecl 命令</h3><p>在介绍<code>pecl</code>命令之前，先解释一下<code>PEAR</code>，因为这两个存在某种联系。</p>
<p><code>PEAR</code>其实是<code>PHP</code>官方的一个扩展和应用仓库：<a class="link"   target="_blank" rel="noopener" href="https://pear.php.net/" >PEAR — PHP Extension and Application Repository<i class="fas fa-external-link-alt"></i></a>。</p>
<p>从字面意思看就是一个存储<code>php extension</code>和<code>php package</code>的仓库。</p>
<p>而<code>PECL</code>是<code>PHP Extension Community Library</code>，就是本文所介绍的<code>extension</code>，<code>pecl</code>是一个<code>extension</code>管理工具，用这个工具可以把自己写的<code>extension</code>发布到<code>PEAR</code>，可以去<code>PEAR</code>下载安装<code>extension</code>到自己的<code>PHP</code>环境。</p>
<blockquote>
<p><code>pecl</code>、<code>pear</code>、<code>phpize</code>和<code>Composer</code>的区别？</p>
<blockquote>
<p>四者都是为当前所处的<code>PHP</code>环境所需要的额外功能而建立的。</p>
</blockquote>
</blockquote>
<table>
<thead>
<tr>
<th>命令</th>
<th>说明</th>
<th>实现语言</th>
<th>呈现形式</th>
<th>效率</th>
</tr>
</thead>
<tbody><tr>
<td><a class="link"   target="_blank" rel="noopener" href="http://pecl.php.net/" >pecl<i class="fas fa-external-link-alt"></i></a></td>
<td><code>PHP Extension Community Library</code>的缩写，即<code>PHP</code>（开放）扩展库。<br>官方的底层扩展聚合平台。<br>通常用于补充一些用<code>PHP</code>难以完成的底层功能。</td>
<td><code>C</code></td>
<td><code>*.dll</code><br><code>*.so</code></td>
<td><code>A</code></td>
</tr>
<tr>
<td><a class="link"   target="_blank" rel="noopener" href="http://pear.php.net/" >pear<i class="fas fa-external-link-alt"></i></a> <br> <a class="link"   target="_blank" rel="noopener" href="http://pear.php.net/go-pear.phar" >下载<i class="fas fa-external-link-alt"></i></a></td>
<td><code>PHP Extension and Application Repository</code>的缩写，即<code>PHP</code>扩展和应用仓库。<br><code>PHP</code>代码层面的扩展&#x2F;上层扩展<br>为特定的应用提供现成的函数或者类库。</td>
<td><code>PHP</code></td>
<td><code>*.php</code></td>
<td>PEAR是PHP的上层扩展。</td>
</tr>
<tr>
<td><a class="link"   target="_blank" rel="noopener" href="http://pear.php.net/" >phpize<i class="fas fa-external-link-alt"></i></a></td>
<td>安装<code>外挂包</code>的命令。<br><code>PECL</code>未收录的扩展用该方式手动配置安装。</td>
<td><code>C</code></td>
<td></td>
<td>同<code>pecl</code></td>
</tr>
<tr>
<td><a class="link"   target="_blank" rel="noopener" href="https://www.phpcomposer.com/" >composer<i class="fas fa-external-link-alt"></i></a></td>
<td>管理PHP层面的扩展。<br>通常使用在项目中，是用来管理依赖（<code>dependency</code>）关系的工具。</td>
<td><code>PHP</code></td>
<td><code>*.php</code></td>
<td>同<code>pear</code></td>
</tr>
</tbody></table>
<p>下面介绍一下<code>pecl</code>工具的安装和使用。</p>
<p>安装<code>pecl</code>命令。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ wget http://pear.php.net/go-pear.phar</span><br><span class="line"></span><br><span class="line">$ php go-pear.phar</span><br></pre></td></tr></table></figure>

<p>这就安装好了，查看一下使用方式。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">$ pecl</span><br><span class="line">Commands:</span><br><span class="line">build                  Build an Extension From C Source</span><br><span class="line">bundle                 Unpacks a Pecl Package</span><br><span class="line">channel-add            Add a Channel</span><br><span class="line">channel-alias          Specify an alias to a channel name</span><br><span class="line">channel-delete         Remove a Channel From the List</span><br><span class="line">channel-discover       Initialize a Channel from its server</span><br><span class="line">channel-info           Retrieve Information on a Channel</span><br><span class="line">channel-login          Connects and authenticates to remote channel server</span><br><span class="line">channel-logout         Logs out from the remote channel server</span><br><span class="line">channel-update         Update an Existing Channel</span><br><span class="line">clear-cache            Clear Web Services Cache</span><br><span class="line">config-create          Create a Default configuration file</span><br><span class="line">config-get             Show One Setting</span><br><span class="line">config-help            Show Information About Setting</span><br><span class="line">config-set             Change Setting</span><br><span class="line">config-show            Show All Settings</span><br><span class="line">convert                Convert a package.xml 1.0 to package.xml 2.0 format</span><br><span class="line">cvsdiff                Run a &quot;cvs diff&quot; for all files in a package</span><br><span class="line">cvstag                 Set CVS Release Tag</span><br><span class="line">download               Download Package</span><br><span class="line">download-all           Downloads each available package from the default channel</span><br><span class="line">info                   Display information about a package</span><br><span class="line">install                Install Package</span><br><span class="line">list                   List Installed Packages In The Default Channel</span><br><span class="line">list-all               List All Packages</span><br><span class="line">list-channels          List Available Channels</span><br><span class="line">list-files             List Files In Installed Package</span><br><span class="line">list-upgrades          List Available Upgrades</span><br><span class="line">login                  Connects and authenticates to remote server [Deprecated in favor of channel-login]</span><br><span class="line">logout                 Logs out from the remote server [Deprecated in favor of channel-logout]</span><br><span class="line">makerpm                Builds an RPM spec file from a PEAR package</span><br><span class="line">package                Build Package</span><br><span class="line">package-dependencies   Show package dependencies</span><br><span class="line">package-validate       Validate Package Consistency</span><br><span class="line">pickle                 Build PECL Package</span><br><span class="line">remote-info            Information About Remote Packages</span><br><span class="line">remote-list            List Remote Packages</span><br><span class="line">run-scripts            Run Post-Install Scripts bundled with a package</span><br><span class="line">run-tests              Run Regression Tests</span><br><span class="line">search                 Search remote package database</span><br><span class="line">shell-test             Shell Script Test</span><br><span class="line">sign                   Sign a package distribution file</span><br><span class="line">svntag                 Set SVN Release Tag</span><br><span class="line">uninstall              Un-install Package</span><br><span class="line">update-channels        Update the Channel List</span><br><span class="line">upgrade                Upgrade Package</span><br><span class="line">upgrade-all            Upgrade All Packages [Deprecated in favor of calling upgrade with no parameters]</span><br><span class="line">Usage: pecl [options] command [command-options] &lt;parameters&gt;</span><br><span class="line">Type &quot;pecl help options&quot; to list all options.</span><br><span class="line">Type &quot;pecl help shortcuts&quot; to list all command shortcuts.</span><br><span class="line">Type &quot;pecl help version&quot; or &quot;pecl version&quot; to list version information.</span><br><span class="line">Type &quot;pecl help &lt;command&gt;&quot; to get the help for the specified command.</span><br></pre></td></tr></table></figure>

<p>安装扩展：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pecl install xdebug</span><br></pre></td></tr></table></figure>

<h3 id="使用系统命令安装"><a href="#使用系统命令安装" class="headerlink" title="使用系统命令安装"></a>使用系统命令安装</h3><p>以<code>PHP</code>运行环境是<code>Ubuntu</code>系统为例，安装<code>xdebug</code>扩展。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ apt-get install php7.2-xdebug</span><br><span class="line"></span><br><span class="line">$ php -m | grep xdebug</span><br><span class="line">xdebug</span><br></pre></td></tr></table></figure>

<h1 id="常用扩展"><a href="#常用扩展" class="headerlink" title="常用扩展"></a>常用扩展</h1><ol>
<li>必装扩展。</li>
</ol>
<table>
<thead>
<tr>
<th>Extension</th>
<th>说明</th>
<th>官网&#x2F;文档</th>
</tr>
</thead>
<tbody><tr>
<td><code>redis</code></td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>memcached</code></td>
<td><code>memcache</code>强大的内容缓存器。</td>
<td></td>
</tr>
<tr>
<td><code>mongodb</code></td>
<td><code>MongoDB</code>服务，配合<code>Mongo Express（MongoDB 服务管理系统）</code>来使用。</td>
<td></td>
</tr>
<tr>
<td><code>pcntl</code></td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>xdebug</code></td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>bcmath</code></td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>swoole</code></td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Zend OPcache</code></td>
<td>PHP 代码加速器，将 PHP 源代码的编译结果缓存起来，再次调用时对比时间标记，如果没有改变则使用缓存数据，免去再次解析代码的开销。监控、管理<code>Zend Opcache</code>的两个开源项目：<a class="link"   target="_blank" rel="noopener" href="https://github.com/PeeHaa/OpCacheGUI" >OpCacheGUI<i class="fas fa-external-link-alt"></i></a>和<a class="link"   target="_blank" rel="noopener" href="https://github.com/amnuts/opcache-gui" >opcache-gui<i class="fas fa-external-link-alt"></i></a>，第二个貌似好搞一点。</td>
<td><a class="link"   target="_blank" rel="noopener" href="https://www.cnblogs.com/wangxiaoqiangs/p/5336562.html" >cnblog<i class="fas fa-external-link-alt"></i></a></td>
</tr>
<tr>
<td><code>pdo_mysql</code></td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>xhprof</code></td>
<td><code>Facebook</code>开发的<code>PHP</code>性能追踪及分析工具，通常配合<a target="_blank" rel="noopener" href="https://github.com/perftools/xhgui">xhgui（分析数据的<code>GUI</code>系统）</a>&#x2F;<a class="link"   target="_blank" rel="noopener" href="https://github.com/laynefyc/xhgui-branch" >xhgui中文版<i class="fas fa-external-link-alt"></i></a>来使用。</td>
<td></td>
</tr>
<tr>
<td><code>tideways</code></td>
<td><code>xhprof</code>的一个分支，支持<code>PHP7</code>，配合<code>tideways-gui</code>使用。</td>
<td></td>
</tr>
<tr>
<td><code>tideways_xhprof</code></td>
<td><code>xhprof</code>的一个分支。</td>
<td><a class="link"   target="_blank" rel="noopener" href="https://github.com/tideways/php-xhprof-extension" >github<i class="fas fa-external-link-alt"></i></a></td>
</tr>
<tr>
<td><code>vld</code></td>
<td>查看<code>opcode</code>的工具。</td>
<td><a class="link"   target="_blank" rel="noopener" href="https://github.com/derickr/vld" >github<i class="fas fa-external-link-alt"></i></a></td>
</tr>
<tr>
<td><code>php-monitor</code></td>
<td>一个免费、易用、强大的PHP服务监控工具。帮助开发者监控PHP服务，分析PHP性能。（A free, flexible, powerful tool that helps you monitor PHP Service and profiling PHP code.）</td>
<td><a class="link"   target="_blank" rel="noopener" href="https://github.com/laynefyc/php-monitor" >github<i class="fas fa-external-link-alt"></i></a></td>
</tr>
<tr>
<td><code>donkeyid</code></td>
<td>基于snowflake算法64位自增ID生成器。</td>
<td><a class="link"   target="_blank" rel="noopener" href="https://gitee.com/osgochina/donkeyid/" >gitee<i class="fas fa-external-link-alt"></i></a></td>
</tr>
</tbody></table>
<ol start="2">
<li>工作中常用扩展。</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">```</span><br><span class="line"></span><br><span class="line">3. 特定用途的扩展。</span><br><span class="line"></span><br><span class="line"># 常见问题</span><br><span class="line"></span><br><span class="line"># 开发扩展</span><br><span class="line"></span><br><span class="line">extensionintrogithub/websiteguiXdebugPHP程序调试器(即一个Debug工具)WebgrindZend Opcachepcntlswoole高性能的异步并发 TCP、UDP、Unix Socket、HTTP，WebSocket服务xhproftidewaysdonkeyidgithubxlswriterxlswriter 是一个高性能 PHP C 扩展，可用于读取、写入 Excel 2007+ xlsx 文件，适用于 Linux，FreeBSD，OpenBSD，OS X，Windows。githubphptracephptrace是一个低开销的用于跟踪、分析PHP运行情况的工具。githubWe have a new trace tool Molten, It&#x27;s an OpenTracing supported tracer, for Distributed Tracing System.我们开发了新的Trace工具 Molten， 它支持OpenTracing，用于分布式追踪系统。SeasLogAn effective,fast,stable log extension for PHPgithubZephirZephir is a compiled high level language aimed to the creation of C-extensions for PHPgithubgearmanGearman是一个分布式的任务调度框架site</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">https://www.cnblogs.com/sunsky303/p/11134222.html</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">比memcache支持更多高级功能redis基于内存亦可持久化的Key-Value数据库mongodbMongoDB的PHP驱动</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 附录</span><br><span class="line"></span><br><span class="line">## 编译PHP扩展的相关工具</span><br><span class="line"></span><br><span class="line">首先你需要下载一份扩展的源码，可以到github或者pecl.php.net上下载，解压后放到一个目录中，cd进入此目录。</span><br><span class="line"></span><br><span class="line">autoconf</span><br><span class="line"></span><br><span class="line">根据config.m4生成configure脚本，phpize是基于autoconf的封装。</span><br><span class="line"></span><br><span class="line">phpize</span><br><span class="line"></span><br><span class="line">phpize这个工具是php官方提供的，用于将PHP扩展的config.m4解析生成./configure 脚本。</span><br><span class="line"></span><br><span class="line">configure</span><br><span class="line"></span><br><span class="line">这个脚本是用来检测系统和环境状态，依赖库和头文件是否存在，编译配置等</span><br><span class="line"></span><br><span class="line">php-config</span><br><span class="line"></span><br><span class="line">这个工具执行后会打印当前PHP安装在哪里目录，API版本号是什么，扩展目录在哪里等信息。configure脚本需要依赖它找到PHP安装的目录</span><br><span class="line"></span><br><span class="line">make</span><br><span class="line"></span><br><span class="line">用来将.c源文件编译为目标文件。make install将编译好的扩展文件，如swoole.so安装到PHP的扩展目录下</span><br><span class="line"></span><br><span class="line">gcc</span><br><span class="line"></span><br><span class="line">编译器，将*.c源文件编译为目标文件。并连接所有目标文件生成swoole.so</span><br><span class="line"></span><br><span class="line">clang</span><br><span class="line"></span><br><span class="line">另外一种编译器，FreeBSD/MacOS下用的比较多。</span><br><span class="line"></span><br><span class="line">安装过程</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">```shell</span><br><span class="line">phpize</span><br><span class="line">./configure</span><br><span class="line">make</span><br><span class="line">make install</span><br></pre></td></tr></table></figure>

<p>链接<br><a class="link"   target="_blank" rel="noopener" href="https://github.com/swoole/swoole-wiki/blob/master/doc/16.18%20-%20%E9%99%84%E5%BD%95%EF%BC%9A%E7%BC%96%E8%AF%91PHP%E6%89%A9%E5%B1%95%E7%9A%84%E7%9B%B8%E5%85%B3%E5%B7%A5%E5%85%B7.md" >github<i class="fas fa-external-link-alt"></i></a></p>

        </div>

        
            <div class="post-copyright-info">
                <div class="article-copyright-info-container">
    <ul>
        <li>Post title：PHP项目最佳实践系列——php扩展之extension篇</li>
        <li>Post author：dszkng</li>
        <li>Create time：2020-10-15 18:56:42</li>
        <li>
            Post link：https://blog.aakng.com/2020/10/15/PHP项目最佳实践系列——php-module篇/
        </li>
        <li>
            Copyright Notice：All articles in this blog are licensed under <a class="license" target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">BY-NC-SA</a> unless stating additionally.
        </li>
    </ul>
</div>

            </div>
        

        
            <ul class="post-tags-box">
                
                    <li class="tag-item">
                        <a href="/tags/PHP/">#PHP</a>&nbsp;
                    </li>
                
                    <li class="tag-item">
                        <a href="/tags/Extension/">#Extension</a>&nbsp;
                    </li>
                
                    <li class="tag-item">
                        <a href="/tags/Coding/">#Coding</a>&nbsp;
                    </li>
                
            </ul>
        

        
            <div class="article-nav">
                
                    <div class="article-prev">
                        <a class="prev"
                           rel="prev"
                           href="/2020/10/19/%E7%BC%96%E7%A8%8B%E6%80%9D%E6%83%B3/"
                        >
                            <span class="left arrow-icon flex-center">
                              <i class="fas fa-chevron-left"></i>
                            </span>
                            <span class="title flex-center">
                                <span class="post-nav-title-item">编程思想</span>
                                <span class="post-nav-item">Prev posts</span>
                            </span>
                        </a>
                    </div>
                
                
                    <div class="article-next">
                        <a class="next"
                           rel="next"
                           href="/2020/08/25/PHP%E9%A1%B9%E7%9B%AE%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5%E7%B3%BB%E5%88%97%E2%80%94%E2%80%94php%E8%BF%90%E8%A1%8C%E6%A8%A1%E5%BC%8F%E7%AF%87/"
                        >
                            <span class="title flex-center">
                                <span class="post-nav-title-item">PHP项目最佳实践系列——php运行模式篇</span>
                                <span class="post-nav-item">Next posts</span>
                            </span>
                            <span class="right arrow-icon flex-center">
                              <i class="fas fa-chevron-right"></i>
                            </span>
                        </a>
                    </div>
                
            </div>
        

        
    </div>
</div>


                
            </div>

        </div>

        <div class="page-main-content-bottom">
            <footer class="footer">
    <div class="info-container">
        <div class="copyright-info info-item">
            &copy;
            
              <span>2015</span>
              -
            
            2022&nbsp;<i class="fas fa-heart icon-animate"></i>&nbsp;<a href="/">dszkng</a>
        </div>
        
        <div class="theme-info info-item">
            Powered by <a target="_blank" href="https://hexo.io">Hexo</a>&nbsp;|&nbsp;Theme&nbsp;<a class="theme-version" target="_blank" href="https://github.com/XPoet/hexo-theme-keep">Keep v3.4.5</a>
        </div>
        
            <div class="icp-info info-item"><a target="_blank" rel="nofollow" href="https://beian.miit.gov.cn">皖ICP备16002968号-1</a></div>
        
        
    </div>
</footer>

        </div>
    </div>

    
        <div class="post-tools">
            <div class="post-tools-container">
    <ul class="tools-list">
        <!-- TOC aside toggle -->
        
            <li class="tools-item page-aside-toggle">
                <i class="fas fa-outdent"></i>
            </li>
        

        <!-- go comment -->
        
    </ul>
</div>

        </div>
    

    <div class="right-bottom-side-tools">
        <div class="side-tools-container">
    <ul class="side-tools-list">
        <li class="tools-item tool-font-adjust-plus flex-center">
            <i class="fas fa-search-plus"></i>
        </li>

        <li class="tools-item tool-font-adjust-minus flex-center">
            <i class="fas fa-search-minus"></i>
        </li>

        <li class="tools-item tool-expand-width flex-center">
            <i class="fas fa-arrows-alt-h"></i>
        </li>

        <li class="tools-item tool-dark-light-toggle flex-center">
            <i class="fas fa-moon"></i>
        </li>

        <!-- rss -->
        

        
            <li class="tools-item tool-scroll-to-top flex-center">
                <i class="fas fa-arrow-up"></i>
            </li>
        

        <li class="tools-item tool-scroll-to-bottom flex-center">
            <i class="fas fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="exposed-tools-list">
        <li class="tools-item tool-toggle-show flex-center">
            <i class="fas fa-cog fa-spin"></i>
        </li>
        
    </ul>
</div>

    </div>

    
        <aside class="page-aside">
            <div class="post-toc-wrap">
    <div class="post-toc">
        <ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%89%8D%E8%A8%80"><span class="nav-number">1.</span> <span class="nav-text">前言</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="nav-number">2.</span> <span class="nav-text">工作原理</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%89%A9%E5%B1%95%E7%9A%84%E5%AE%89%E8%A3%85"><span class="nav-number">3.</span> <span class="nav-text">扩展的安装</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85"><span class="nav-number">3.1.</span> <span class="nav-text">编译安装</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9B%9E%E9%A1%BE-php-%E4%B8%BB%E8%A6%81%E7%9B%AE%E5%BD%95%E5%92%8C%E5%91%BD%E4%BB%A4"><span class="nav-number">3.1.1.</span> <span class="nav-text">回顾 php 主要目录和命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8-phpize-%E5%91%BD%E4%BB%A4%E5%AE%89%E8%A3%85%E6%89%A9%E5%B1%95"><span class="nav-number">3.1.2.</span> <span class="nav-text">使用 phpize 命令安装扩展</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E5%B7%A5%E5%85%B7%E5%AE%89%E8%A3%85"><span class="nav-number">3.2.</span> <span class="nav-text">使用工具安装</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8-install-php-extensions-%E8%84%9A%E6%9C%AC"><span class="nav-number">3.2.1.</span> <span class="nav-text">使用 install-php-extensions 脚本</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8-pecl-%E5%91%BD%E4%BB%A4"><span class="nav-number">3.2.2.</span> <span class="nav-text">使用 pecl 命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E7%B3%BB%E7%BB%9F%E5%91%BD%E4%BB%A4%E5%AE%89%E8%A3%85"><span class="nav-number">3.2.3.</span> <span class="nav-text">使用系统命令安装</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%B8%B8%E7%94%A8%E6%89%A9%E5%B1%95"><span class="nav-number">4.</span> <span class="nav-text">常用扩展</span></a></li></ol>
    </div>
</div>
        </aside>
    

    <div class="image-viewer-container">
    <img src="">
</div>


    
        <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
          <span class="search-input-field-pre">
            <i class="fas fa-keyboard"></i>
          </span>
            <div class="search-input-container">
                <input autocomplete="off"
                       autocorrect="off"
                       autocapitalize="off"
                       placeholder="Search..."
                       spellcheck="false"
                       type="search"
                       class="search-input"
                >
            </div>
            <span class="popup-btn-close">
                <i class="fas fa-times"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fas fa-spinner fa-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>

    

</main>




<script src="/js/utils.js"></script>

<script src="/js/main.js"></script>

<script src="/js/header-shrink.js"></script>

<script src="/js/back2top.js"></script>

<script src="/js/dark-light-toggle.js"></script>



    
<script src="/js/local-search.js"></script>




    
<script src="/js/code-copy.js"></script>




    
<script src="/js/lazyload.js"></script>



<div class="post-scripts">
    
        
<script src="/js/left-side-toggle.js"></script>

<script src="/js/libs/anime.min.js"></script>

<script src="/js/toc.js"></script>

    
</div>



</body>
</html>
